<Application xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:FullCrisis3"
             xmlns:views="using:FullCrisis3"
             x:Class="FullCrisis3.App"
             RequestedThemeVariant="Dark">

  <Application.Resources>
    <FontFamily x:Key="RockwellFont">avares://FullCrisis3/thirdparty-assets/fonts#Rockwell</FontFamily>
    <FontFamily x:Key="LetterGothicFont">avares://FullCrisis3/thirdparty-assets/fonts#Letter Gothic</FontFamily>
  </Application.Resources>

  <Application.DataTemplates>
    <DataTemplate DataType="vm:MainMenuViewModel">
      <views:MainMenuView />
    </DataTemplate>
    <DataTemplate DataType="vm:SubMenuViewModel">
      <views:SubMenuView />
    </DataTemplate>
    <DataTemplate DataType="vm:SettingsViewModel">
      <views:SettingsView />
    </DataTemplate>
  </Application.DataTemplates>

  <Application.Styles>
    <FluentTheme />
    
    <Style Selector="TextBlock.Title">
      <Setter Property="FontFamily" Value="{StaticResource RockwellFont}" />
      <Setter Property="FontSize" Value="48" />
      <Setter Property="FontWeight" Value="Bold" />
      <Setter Property="Foreground" Value="White" />
      <Setter Property="HorizontalAlignment" Value="Center" />
    </Style>
    
    <!-- Base CustomButton style for all app buttons -->
    <Style Selector="Button.CustomButton">
      <Setter Property="FontFamily" Value="{StaticResource LetterGothicFont}" />
      <Setter Property="BorderBrush" Value="#FF6B7280" />
      <Setter Property="BorderThickness" Value="2" />
      <Setter Property="Foreground" Value="White" />
    </Style>
    
    <!-- CustomButton focus behavior with animated dashed outline -->
    <Style Selector="Button.CustomButton:focus">
      <Setter Property="BorderBrush" Value="#FF9CA3AF" />
      <Setter Property="BorderThickness" Value="3" />
    </Style>
    
    <!-- Template for buttons with animated focus border -->
    <Style Selector="Button.CustomButton">
      <Setter Property="Template">
        <ControlTemplate>
          <Panel>
            <!-- Main button content -->
            <Border Name="PART_Border" 
                    Background="{TemplateBinding Background}"
                    BorderBrush="{TemplateBinding BorderBrush}"
                    BorderThickness="{TemplateBinding BorderThickness}"
                    CornerRadius="8"
                    Padding="{TemplateBinding Padding}">
              <ContentPresenter Name="PART_ContentPresenter"
                              Content="{TemplateBinding Content}"
                              ContentTemplate="{TemplateBinding ContentTemplate}"
                              VerticalAlignment="Center"
                              HorizontalAlignment="Center"
                              TextBlock.Foreground="{TemplateBinding Foreground}"
                              TextBlock.FontFamily="{TemplateBinding FontFamily}"
                              TextBlock.FontSize="{TemplateBinding FontSize}" />
            </Border>
            
            <!-- Animated dashed border for focus -->
            <vm:AnimatedDashedBorder Name="PART_FocusBorder"
                                   IsVisible="False"
                                   DashLength="8"
                                   AnimationSpeed="30"
                                   StrokeThickness="2" />
          </Panel>
        </ControlTemplate>
      </Setter>
    </Style>
    
    <!-- Show animated border when focused -->
    <Style Selector="Button.CustomButton:focus /template/ vm|AnimatedDashedBorder#PART_FocusBorder">
      <Setter Property="IsVisible" Value="True" />
    </Style>
    
    <!-- Override default FluentTheme hover styles to preserve button background -->
    <Style Selector="Button.CustomButton:pointerover /template/ ContentPresenter#PART_ContentPresenter">
      <Setter Property="Background" Value="{Binding $parent[Button].Background}" />
      <Setter Property="BorderBrush" Value="{Binding $parent[Button].BorderBrush}" />
    </Style>
    
    <!-- Override default FluentTheme pressed styles to preserve button background -->
    <Style Selector="Button.CustomButton:pressed /template/ ContentPresenter#PART_ContentPresenter">
      <Setter Property="Background" Value="{Binding $parent[Button].Background}" />
      <Setter Property="BorderBrush" Value="{Binding $parent[Button].BorderBrush}" />
    </Style>
    
    <!-- Main menu specific button styling -->
    <Style Selector="Button.MenuButton">
      <Setter Property="FontSize" Value="20" />
      <Setter Property="Background" Value="#FF3A4D5A" />
      <Setter Property="Padding" Value="20,10" />
      <Setter Property="Margin" Value="0,8" />
      <Setter Property="HorizontalAlignment" Value="Center" />
      <Setter Property="MinWidth" Value="200" />
    </Style>
    
    <!-- Quit dialog specific button styling -->
    <Style Selector="Button.QuitDialogButton">
      <Setter Property="FontSize" Value="16" />
      <Setter Property="Padding" Value="15,8" />
      <Setter Property="MinWidth" Value="120" />
    </Style>
    
    <!-- Individual menu button hover effects -->
    <Style Selector="Button#NewGameButton:pointerover">
      <Setter Property="Background" Value="#FF388E3C" />
    </Style>
    <Style Selector="Button#NewGameButton:pointerover /template/ ContentPresenter#PART_ContentPresenter">
      <Setter Property="Background" Value="#FF388E3C" />
    </Style>
    
    <Style Selector="Button#LoadGameButton:pointerover">
      <Setter Property="Background" Value="#FF1E88E5" />
    </Style>
    <Style Selector="Button#LoadGameButton:pointerover /template/ ContentPresenter#PART_ContentPresenter">
      <Setter Property="Background" Value="#FF1E88E5" />
    </Style>
    
    <Style Selector="Button#SettingsButton:pointerover">
      <Setter Property="Background" Value="#FFF9A825" />
    </Style>
    <Style Selector="Button#SettingsButton:pointerover /template/ ContentPresenter#PART_ContentPresenter">
      <Setter Property="Background" Value="#FFF9A825" />
    </Style>
    
    <Style Selector="Button#QuitButton:pointerover">
      <Setter Property="Background" Value="#FFE53935" />
    </Style>
    <Style Selector="Button#QuitButton:pointerover /template/ ContentPresenter#PART_ContentPresenter">
      <Setter Property="Background" Value="#FFE53935" />
    </Style>
    
    <!-- Back button specific styling -->
    <Style Selector="Button.BackButton">
      <Setter Property="FontSize" Value="18" />
      <Setter Property="Background" Value="#FF3A4D5A" />
      <Setter Property="Padding" Value="15,8" />
      <Setter Property="MinWidth" Value="100" />
    </Style>
    
    <!-- CheckBox focus styling -->
    <Style Selector="CheckBox:focus">
      <Setter Property="BorderBrush" Value="Yellow" />
      <Setter Property="BorderThickness" Value="2" />
    </Style>
    
    <Style Selector="TextBlock">
      <Setter Property="FontFamily" Value="{StaticResource LetterGothicFont}" />
    </Style>
  </Application.Styles>
</Application>